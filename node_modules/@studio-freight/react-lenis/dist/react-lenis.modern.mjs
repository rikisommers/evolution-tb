import{useFrame as r}from"@studio-freight/hamo";import t from"@studio-freight/lenis";import e from"prop-types";import o,{createContext as n,forwardRef as a,useRef as c,useState as l,useCallback as i,useImperativeHandle as s,useEffect as p,useContext as u}from"react";import{create as f}from"zustand";function d(){return d=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}return r},d.apply(this,arguments)}const m=n(),b=f(()=>({}));function v(r=void 0,t=[],e=0){const{lenis:o,addCallback:n,removeCallback:a}=function(){const r=u(m),t=b();return null!=r?r:t}();return p(()=>{if(r&&n&&a&&o)return n(r,e),r(o),()=>{a(r)}},[o,n,a,e,...t]),o}const y=a(({children:e,root:n=!1,options:a={},isStopped:u=!1,className:f},v)=>{const y=c(),h=c(),[k,g]=l(),C=c([]),N=i((r,t)=>{C.current.push({callback:r,priority:t}),C.current.sort((r,t)=>r.priority-t.priority)},[]),O=i(r=>{C.current=C.current.filter(t=>t.callback!==r)},[]);s(v,()=>k,[k]),p(()=>{const r=new t(d({},a,!n&&{wrapper:y.current,content:h.current}));return g(r),()=>{r.destroy(),g(void 0)}},[n,JSON.stringify(a)]),r(r=>{null==k||k.raf(r)}),p(()=>{k&&(u?k.stop():k.start())},[k,u]),p(()=>{n&&k&&b.setState({lenis:k,addCallback:N,removeCallback:O})},[n,k,N,O]);const j=i(r=>{for(let t=0;t<C.current.length;t++)C.current[t].callback(r)},[]);return p(()=>{if(k)return k.on("scroll",j),()=>{k.off("scroll",j)}},[k,j]),/*#__PURE__*/o.createElement(m.Provider,{value:{lenis:k,addCallback:N,removeCallback:O}},n?e:/*#__PURE__*/o.createElement("div",{ref:y,className:f},/*#__PURE__*/o.createElement("div",{ref:h},e)))});y.displayName="ReactLenis",y.propTypes={children:e.node,root:e.bool,options:e.object,isStopped:e.bool,className:e.string};export{y as Lenis,y as ReactLenis,v as useLenis};
//# sourceMappingURL=react-lenis.modern.mjs.map
