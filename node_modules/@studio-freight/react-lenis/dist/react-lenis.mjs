import{useFrame as r}from"@studio-freight/hamo";import t from"@studio-freight/lenis";import n from"prop-types";import o,{createContext as e,forwardRef as i,useRef as c,useState as a,useCallback as l,useImperativeHandle as u,useEffect as f,useContext as s}from"react";import{create as p}from"zustand";function d(){return d=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])}return r},d.apply(this,arguments)}var v=e(),m=p(function(){return{}});function b(r,t,n){void 0===r&&(r=void 0),void 0===t&&(t=[]),void 0===n&&(n=0);var o,e,i=(o=s(v),e=m(),null!=o?o:e),c=i.lenis,a=i.addCallback,l=i.removeCallback;return f(function(){if(r&&a&&l&&c)return a(r,n),r(c),function(){l(r)}},[c,a,l,n].concat(t)),c}var y=i(function(n,e){var i=n.children,s=n.root,p=void 0!==s&&s,b=n.options,y=void 0===b?{}:b,h=n.isStopped,k=void 0!==h&&h,g=n.className,C=c(),N=c(),O=a(),j=O[0],S=O[1],w=c([]),E=l(function(r,t){w.current.push({callback:r,priority:t}),w.current.sort(function(r,t){return r.priority-t.priority})},[]),L=l(function(r){w.current=w.current.filter(function(t){return t.callback!==r})},[]);u(e,function(){return j},[j]),f(function(){var r=new t(d({},y,!p&&{wrapper:C.current,content:N.current}));return S(r),function(){r.destroy(),S(void 0)}},[p,JSON.stringify(y)]),r(function(r){null==j||j.raf(r)}),f(function(){j&&(k?j.stop():j.start())},[j,k]),f(function(){p&&j&&m.setState({lenis:j,addCallback:E,removeCallback:L})},[p,j,E,L]);var P=l(function(r){for(var t=0;t<w.current.length;t++)w.current[t].callback(r)},[]);return f(function(){if(j)return j.on("scroll",P),function(){j.off("scroll",P)}},[j,P]),/*#__PURE__*/o.createElement(v.Provider,{value:{lenis:j,addCallback:E,removeCallback:L}},p?i:/*#__PURE__*/o.createElement("div",{ref:C,className:g},/*#__PURE__*/o.createElement("div",{ref:N},i)))});y.displayName="ReactLenis",y.propTypes={children:n.node,root:n.bool,options:n.object,isStopped:n.bool,className:n.string};export{y as Lenis,y as ReactLenis,b as useLenis};
//# sourceMappingURL=react-lenis.mjs.map
