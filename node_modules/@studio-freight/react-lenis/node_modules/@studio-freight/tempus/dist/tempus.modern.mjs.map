{"version":3,"file":"tempus.modern.mjs","sources":["../src/raf.js"],"sourcesContent":["class Raf {\r\n  constructor() {\r\n    if (typeof window === 'undefined') return\r\n\r\n    this.callbacks = []\r\n    this.now = performance.now()\r\n    requestAnimationFrame(this.raf)\r\n  }\r\n\r\n  add(callback, priority = 0) {\r\n    this.callbacks.push({ callback, priority })\r\n    this.callbacks.sort((a, b) => a.priority - b.priority)\r\n\r\n    return () => this.remove(callback)\r\n  }\r\n\r\n  remove(callback) {\r\n    this.callbacks = this.callbacks.filter(({ callback: cb }) => callback !== cb)\r\n  }\r\n\r\n  raf = (now) => {\r\n    requestAnimationFrame(this.raf)\r\n\r\n    const deltaTime = now - this.now\r\n    this.now = now\r\n\r\n    for (let i = 0; i < this.callbacks.length; i++) {\r\n      this.callbacks[i].callback(now, deltaTime)\r\n    }\r\n  }\r\n}\r\n\r\nconst raf = new Raf()\r\nexport { raf }\r\n"],"names":["raf","constructor","now","requestAnimationFrame","this","i","callbacks","length","callback","deltaTime","window","performance","add","priority","push","sort","a","b","remove","filter","cb"],"mappings":"AAgCMA,MAAGA,EAAG,IAhCZ,MACEC,cAmBAD,KAAAA,IAAOE,IACLC,sBAAsBC,KAAKJ,KAE3B,QAAkBE,EAAME,KAAKF,IAC7BE,KAAKF,IAAMA,EAEX,IAAK,IAAIG,EAAI,EAAGA,EAAID,KAAKE,UAAUC,OAAQF,IACzCD,KAAKE,UAAUD,GAAGG,SAASN,EAAKO,EAClC,EA1BsB,oBAAXC,SAEXN,KAAKE,UAAY,GACjBF,KAAKF,IAAMS,YAAYT,MACvBC,sBAAsBC,KAAKJ,KAC7B,CAEAY,IAAIJ,EAAUK,EAAW,GAIvB,OAHAT,KAAKE,UAAUQ,KAAK,CAAEN,WAAUK,aAChCT,KAAKE,UAAUS,KAAK,CAACC,EAAGC,IAAMD,EAAEH,SAAWI,EAAEJ,UAEtC,IAAMT,KAAKc,OAAOV,EAC3B,CAEAU,OAAOV,GACLJ,KAAKE,UAAYF,KAAKE,UAAUa,OAAO,EAAGX,SAAUY,KAASZ,IAAaY,EAC5E"}