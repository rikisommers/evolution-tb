// Menu Item Variables
// The number of items in the menu
$menu-items: 3;
// We multiply it by 1% to get the correct % unit
$width: (100/$menu-items) * 1%;
$menu-items-loop-offset: $menu-items - 1; // the number of items in the menu

$background-color: rgba(67, 67, 67, 0.4);
$indicator-color: #e82d00;

.c-menu__wrapper{
  position: fixed;
  bottom:2.5rem;
  transform: translateX(-50%);
  left: 50%;
  right: auto;
  z-index:9999;
  
}

ul.c-menu{
 
  border-radius: 12px;
    backdrop-filter: blur(12px);
    background-color: $background-color;
  display:flex;
    list-style: none;
    margin: 0;
    padding:0;
    gap:0;
    position: relative;// the menu is "relative" to the absolute position last-child pseudo elements.
//    z-index: 0;
    
  

    li{
    flex:1 1 0%;

        a{
        line-height: 48px;
        padding:0 18px;
        color:#fff;
            font-size: 14px;
        }

        &:last-child {
            // make sure the last-child talks to itself
            &:hover, &.is-active {
              &:before {
               // we have to use important because the sibling selctor is more specific.
                left: (100%-$width)+($width/2) !important;
              }
              &:after{
                left: 100%-$width !important;
              }
            }        
          }
          
    }
  
    

    &.with-indicator {


        li{
                // ======================================================
                // Step 2.1 - Making the indicator with the pseudo element.
                // ======================================================
                &:last-child {
        
        
            &:after {
                    content: '';
                    display: block;
                    position: absolute;
                    pointer-events: none;
                    transition: left 300ms ease;
                }
                
                &:after {
                    background: $indicator-color;
                    // top: -6px;
                    bottom: 8px;
                    left: 0;
                    width: $width - 12;
                    margin-left:12px;
                    height:6px;
                    z-index: -1;
                }
        
        
                }
            }
    }   

    @for $i from 1 through $menu-items-loop-offset {
        // when the Nav item "is active", make the indicator line up with the navigation item.
        li:nth-child(#{$i}).is-active ~ li:last-child:after {
          left:($width*$i)-$width;
        }
    }


    // This could be in the same loop as the above but for the tutorial steps it's not
    @for $i from 1 through $menu-items-loop-offset {
        // We have to use !important to make the hovers overide if the last:child is the active or hovered
        .li:nth-child(#{$i}):hover ~ .li:last-child:after {
          left:($width*$i)-$width !important;
        }

          
      }
        
        // // this could be nested in the original .Nav-item
        // .li {
        //     &:last-child {
        //       // make sure the last-child talks to itself
        //       &:hover, &.is-active {
        //         &:after{
        //           left: 100%-$width !important;
        //         }
        //       }        
        //     }
        // }
    
    


}
